description: "Test detection and tokenization of common PII types"

input:
  message: "Hi, I am John Smith, my email is john.smith@company.com and I live at 123 Main Street, New York, NY 10001. My phone is 555-123-4567 and my SSN is 123-45-6789."

expected:
  status: "success"
  sanitized_text: "Hi, I am [Person1], my email is [Person1:email1] and I live at [Person1:address1]. My phone is [Person1:phone1] and my SSN is [Person1:id1]."
  persons:
    Person1:
      primary_name: "John Smith"
      aliases: []
      emails: ["john.smith@company.com"]
      phones: ["555-123-4567"]
      addresses: ["123 Main Street, New York, NY 10001"]
      ids: ["123-45-6789"]
      relationships: {}
      metadata:
        confidence_score: 0.99
        session_count: 1
  token_map:
    "[Person1]": "primary_name"
    "[Person1:email1]": "emails[0]"
    "[Person1:phone1]": "phones[0]"
    "[Person1:address1]": "addresses[0]"
    "[Person1:id1]": "ids[0]"

validation:
  required_fields:
    - status
    - sanitized_text
    - session_id
    - persons
    - token_map
    - pii_mapping
    - original_input
    - timestamp
  person_tokens:
    - "Person1"
  pii_attributes:
    - "primary_name"
    - "emails"
    - "phones"
    - "addresses"
    - "ids"